version: 0.1
component: build
timeoutInSeconds: 6000
runAs: root
shell: bash
env:
  variables:
    "testEnv" : "Hello Bala, This is a test variable!!!"


steps:
  - type: Command
    name: "Install gradle"
    command: |
      #wget https://services.gradle.org/distributions/gradle-6.4.1-bin.zip -P /tmp > kafka.txt
      #mkdir gradle >> kafka.txt
      #unzip -d ./gradle /tmp/gradle-*.zip >> kafka.txt
      #export GRADLE_HOME=./gradle/gradle-6.4.1
      #export PATH=${GRADLE_HOME}/bin:${PATH}
      #echo "PATH is ${PATH}" >> kafka.txt
  - type: Command
    name: "kafka Build"
    command: |
      #echo "Gradle Home is ${GRADLE_HOME}" >> kafka.txt
      #export PATH=${GRADLE_HOME}:${PATH}
      date >> kafka.txt
      ls /tmp >> kafka.txt 2>&1
      cd ${OCI_multisrc2_PROJECT_DIR}
      ./gradlew srcJar >> kafka.txt

outputArtifacts:
  - name: kafka
    type: BINARY
    location: ${OCI_multisrc2_PROJECT_DIR}/abc.txt
  - name: kafka-release
    type: BINARY
    location: ${OCI_multisrc2_PROJECT_DIR}/release.py
